(function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&'object'==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,'default',{enumerable:!0,value:e}),2&n&&'string'!=typeof e)for(var o in e)t.d(a,o,function(t){return e[t]}.bind(null,o));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(n,'a',n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=6)})([function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){'use strict';function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,n){var a,o=typeof e;if('string'==o){var s,i=[],r=e.length,l=0;for(a=0;a<r;++a)s=e.charCodeAt(a),128>s?i[l++]=s:2048>s?(i[l++]=192|s>>6,i[l++]=128|63&s):55296>s||57344<=s?(i[l++]=224|s>>12,i[l++]=128|63&s>>6,i[l++]=128|63&s):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++a)),i[l++]=240|s>>18,i[l++]=128|63&s>>12,i[l++]=128|63&s>>6,i[l++]=128|63&s);e=i}else if('object'!=o)throw new Error(ERROR);else if(null===e)throw new Error(ERROR);else if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR);64<e.length&&(e=new Sha256(t,!0).update(e).array());var d=[],_=[];for(a=0;64>a;++a){var c=e[a]||0;d[a]=92^c,_[a]=54^c}Sha256.call(this,t,n),this.update(_),this.oKeyPad=d,this.inner=!0,this.sharedMemory=n}var ERROR='input is invalid type',WINDOW='object'==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&'object'==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&'object'==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&'object'==typeof module&&module.exports,AMD=__webpack_require__(3),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&'undefined'!=typeof ArrayBuffer,HEX_CHARS=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'],EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=['hex','array','digest','arrayBuffer'],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return'[object Array]'===Object.prototype.toString.call(e)}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return'object'==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(n){return new Sha256(t,!0).update(n)[e]()}},createMethod=function(e){var t=createOutputMethod('hex',e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var n,a=0;a<OUTPUT_TYPES.length;++a)n=OUTPUT_TYPES[a],t[n]=createOutputMethod(n,e);return t},nodeWrap=function(method,is224){var crypto=eval('require(\'crypto\')'),Buffer=eval('require(\'buffer\').Buffer'),algorithm=is224?'sha224':'sha256',nodeMethod=function(e){if('string'==typeof e)return crypto.createHash(algorithm).update(e,'utf8').digest('hex');if(null===e||void 0===e)throw new Error(ERROR);else e.constructor===ArrayBuffer&&(e=new Uint8Array(e));return Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest('hex'):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(n,a){return new HmacSha256(n,t,!0).update(a)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod('hex',e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n,a=0;a<OUTPUT_TYPES.length;++a)n=OUTPUT_TYPES[a],t[n]=createHmacOutputMethod(n,e);return t};Sha256.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if('string'!=n){if('object'!=n)throw new Error(ERROR);else if(null===e)throw new Error(ERROR);else if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var a,o,s=0,i=e.length,r=this.blocks;s<i;){if(this.hashed&&(this.hashed=!1,r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),t)for(o=this.start;s<i&&64>o;++s)r[o>>2]|=e[s]<<SHIFT[3&o++];else for(o=this.start;s<i&&64>o;++s)a=e.charCodeAt(s),128>a?r[o>>2]|=a<<SHIFT[3&o++]:2048>a?(r[o>>2]|=(192|a>>6)<<SHIFT[3&o++],r[o>>2]|=(128|63&a)<<SHIFT[3&o++]):55296>a||57344<=a?(r[o>>2]|=(224|a>>12)<<SHIFT[3&o++],r[o>>2]|=(128|63&a>>6)<<SHIFT[3&o++],r[o>>2]|=(128|63&a)<<SHIFT[3&o++]):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),r[o>>2]|=(240|a>>18)<<SHIFT[3&o++],r[o>>2]|=(128|63&a>>12)<<SHIFT[3&o++],r[o>>2]|=(128|63&a>>6)<<SHIFT[3&o++],r[o>>2]|=(128|63&a)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,64<=o?(this.block=r[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes%=4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],56<=t&&(!this.hashed&&this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t,n,o,s,i,r,l,_,p,u,m,y=this.h0,a=this.h1,b=this.h2,c=this.h3,d=this.h4,v=this.h5,k=this.h6,w=this.h7,E=this.blocks;for(t=16;64>t;++t)i=E[t-15],n=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,i=E[t-2],o=(i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,E[t]=E[t-16]+n+E[t-7]+o<<0;for(m=a&b,t=0;64>t;t+=4)this.first?(this.is224?(_=300032,i=E[0]-1413257819,w=i-150054599<<0,c=i+24177077<<0):(_=704751109,i=E[0]-210244248,w=i-1521486534<<0,c=i+143694565<<0),this.first=!1):(n=(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10),o=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),_=y&a,s=_^y&b^m,l=d&v^~d&k,i=w+o+l+K[t]+E[t],r=n+s,w=c+i<<0,c=i+r<<0),n=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),o=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),p=c&y,s=p^c&a^_,l=w&d^~w&v,i=k+o+l+K[t+1]+E[t+1],r=n+s,k=b+i<<0,b=i+r<<0,n=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),o=(k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7),u=b&c,s=u^b&y^p,l=k&w^~k&d,i=v+o+l+K[t+2]+E[t+2],r=n+s,v=a+i<<0,a=i+r<<0,n=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),o=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),m=a&b,s=m^a&c^u,l=v&k^~v&w,i=d+o+l+K[t+3]+E[t+3],r=n+s,d=y+i<<0,y=i+r<<0;this.h0=this.h0+y<<0,this.h1=this.h1+a<<0,this.h2=this.h2+b<<0,this.h3=this.h3+c<<0,this.h4=this.h4+d<<0,this.h5=this.h5+v<<0,this.h6=this.h6+k<<0,this.h7=this.h7+w<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,a=this.h3,o=this.h4,s=this.h5,i=this.h6,r=this.h7,l=HEX_CHARS[15&e>>28]+HEX_CHARS[15&e>>24]+HEX_CHARS[15&e>>20]+HEX_CHARS[15&e>>16]+HEX_CHARS[15&e>>12]+HEX_CHARS[15&e>>8]+HEX_CHARS[15&e>>4]+HEX_CHARS[15&e]+HEX_CHARS[15&t>>28]+HEX_CHARS[15&t>>24]+HEX_CHARS[15&t>>20]+HEX_CHARS[15&t>>16]+HEX_CHARS[15&t>>12]+HEX_CHARS[15&t>>8]+HEX_CHARS[15&t>>4]+HEX_CHARS[15&t]+HEX_CHARS[15&n>>28]+HEX_CHARS[15&n>>24]+HEX_CHARS[15&n>>20]+HEX_CHARS[15&n>>16]+HEX_CHARS[15&n>>12]+HEX_CHARS[15&n>>8]+HEX_CHARS[15&n>>4]+HEX_CHARS[15&n]+HEX_CHARS[15&a>>28]+HEX_CHARS[15&a>>24]+HEX_CHARS[15&a>>20]+HEX_CHARS[15&a>>16]+HEX_CHARS[15&a>>12]+HEX_CHARS[15&a>>8]+HEX_CHARS[15&a>>4]+HEX_CHARS[15&a]+HEX_CHARS[15&o>>28]+HEX_CHARS[15&o>>24]+HEX_CHARS[15&o>>20]+HEX_CHARS[15&o>>16]+HEX_CHARS[15&o>>12]+HEX_CHARS[15&o>>8]+HEX_CHARS[15&o>>4]+HEX_CHARS[15&o]+HEX_CHARS[15&s>>28]+HEX_CHARS[15&s>>24]+HEX_CHARS[15&s>>20]+HEX_CHARS[15&s>>16]+HEX_CHARS[15&s>>12]+HEX_CHARS[15&s>>8]+HEX_CHARS[15&s>>4]+HEX_CHARS[15&s]+HEX_CHARS[15&i>>28]+HEX_CHARS[15&i>>24]+HEX_CHARS[15&i>>20]+HEX_CHARS[15&i>>16]+HEX_CHARS[15&i>>12]+HEX_CHARS[15&i>>8]+HEX_CHARS[15&i>>4]+HEX_CHARS[15&i];return this.is224||(l+=HEX_CHARS[15&r>>28]+HEX_CHARS[15&r>>24]+HEX_CHARS[15&r>>20]+HEX_CHARS[15&r>>16]+HEX_CHARS[15&r>>12]+HEX_CHARS[15&r>>8]+HEX_CHARS[15&r>>4]+HEX_CHARS[15&r]),l},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,a=this.h3,o=this.h4,s=this.h5,i=this.h6,r=this.h7,l=[255&e>>24,255&e>>16,255&e>>8,255&e,255&t>>24,255&t>>16,255&t>>8,255&t,255&n>>24,255&n>>16,255&n>>8,255&n,255&a>>24,255&a>>16,255&a>>8,255&a,255&o>>24,255&o>>16,255&o>>8,255&o,255&s>>24,255&s>>16,255&s>>8,255&s,255&i>>24,255&i>>16,255&i>>8,255&i];return this.is224||l.push(255&r>>24,255&r>>16,255&r>>8,255&r),l},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))))})()}).call(this,__webpack_require__(1),__webpack_require__(2))},function(e){function t(){throw new Error('setTimeout has not been defined')}function n(){throw new Error('clearTimeout has not been defined')}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(_===clearTimeout)return clearTimeout(e);if((_===n||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(e);try{return _(e)}catch(t){try{return _.call(null,e)}catch(t){return _.call(this,e)}}}function s(){u&&h&&(u=!1,h.length?p=h.concat(p):m=-1,p.length&&r())}function r(){if(!u){var e=a(s);u=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,u=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var d,_,c=e.exports={};(function(){try{d='function'==typeof setTimeout?setTimeout:t}catch(n){d=t}try{_='function'==typeof clearTimeout?clearTimeout:n}catch(t){_=n}})();var h,p=[],u=!1,m=-1;c.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||u||a(r)},l.prototype.run=function(){this.fun.apply(null,this.array)},c.title='browser',c.browser=!0,c.env={},c.argv=[],c.version='',c.versions={},c.on=i,c.addListener=i,c.once=i,c.off=i,c.removeListener=i,c.removeAllListeners=i,c.emit=i,c.prependListener=i,c.prependOnceListener=i,c.listeners=function(){return[]},c.binding=function(){throw new Error('process.binding is not supported')},c.cwd=function(){return'/'},c.chdir=function(){throw new Error('process.chdir is not supported')},c.umask=function(){return 0}},function(e){var t=function(){return this}();try{t=t||new Function('return this')()}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e){(function(t){e.exports=t}).call(this,{})},function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){'use strict';function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var ERROR='input is invalid type',WINDOW='object'==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&'object'==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&'object'==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var buffer8,COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&'object'==typeof module&&module.exports,AMD=__webpack_require__(3),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&'undefined'!=typeof ArrayBuffer,HEX_CHARS=['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'],EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=['hex','array','digest','buffer','arrayBuffer','base64'],BASE64_ENCODE_CHAR=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9','+','/'],blocks=[];if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return'[object Array]'===Object.prototype.toString.call(e)}),ARRAY_BUFFER&&(root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return'object'==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod('hex');NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t,n=0;n<OUTPUT_TYPES.length;++n)t=OUTPUT_TYPES[n],e[t]=createOutputMethod(t);return e},nodeWrap=function(method){var crypto=eval('require(\'crypto\')'),Buffer=eval('require(\'buffer\').Buffer'),nodeMethod=function(e){if('string'==typeof e)return crypto.createHash('md5').update(e,'utf8').digest('hex');if(null===e||void 0===e)throw ERROR;else e.constructor===ArrayBuffer&&(e=new Uint8Array(e));return Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash('md5').update(new Buffer(e)).digest('hex'):method(e)};return nodeMethod};Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if('string'!=n){if('object'!=n)throw ERROR;else if(null===e)throw ERROR;else if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var a,o,s=0,i=e.length,r=this.blocks,l=this.buffer8;s<i;){if(this.hashed&&(this.hashed=!1,r[0]=r[16],r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),t){if(ARRAY_BUFFER)for(o=this.start;s<i&&64>o;++s)l[o++]=e[s];else for(o=this.start;s<i&&64>o;++s)r[o>>2]|=e[s]<<SHIFT[3&o++];}else if(ARRAY_BUFFER)for(o=this.start;s<i&&64>o;++s)a=e.charCodeAt(s),128>a?l[o++]=a:2048>a?(l[o++]=192|a>>6,l[o++]=128|63&a):55296>a||57344<=a?(l[o++]=224|a>>12,l[o++]=128|63&a>>6,l[o++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),l[o++]=240|a>>18,l[o++]=128|63&a>>12,l[o++]=128|63&a>>6,l[o++]=128|63&a);else for(o=this.start;s<i&&64>o;++s)a=e.charCodeAt(s),128>a?r[o>>2]|=a<<SHIFT[3&o++]:2048>a?(r[o>>2]|=(192|a>>6)<<SHIFT[3&o++],r[o>>2]|=(128|63&a)<<SHIFT[3&o++]):55296>a||57344<=a?(r[o>>2]|=(224|a>>12)<<SHIFT[3&o++],r[o>>2]|=(128|63&a>>6)<<SHIFT[3&o++],r[o>>2]|=(128|63&a)<<SHIFT[3&o++]):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),r[o>>2]|=(240|a>>18)<<SHIFT[3&o++],r[o>>2]|=(128|63&a>>12)<<SHIFT[3&o++],r[o>>2]|=(128|63&a>>6)<<SHIFT[3&o++],r[o>>2]|=(128|63&a)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,64<=o?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes%=4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],56<=t&&(!this.hashed&&this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,o,s,i,r=this.blocks;this.first?(e=r[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,o=(-1732584194^2004318071&e)+r[1]-117830708,o=(o<<12|o>>>20)+e<<0,n=(-271733879^o&(-271733879^e))+r[2]-1126478375,n=(n<<17|n>>>15)+o<<0,t=(e^n&(o^e))+r[3]-1316259209,t=(t<<22|t>>>10)+n<<0):(e=this.h0,t=this.h1,n=this.h2,o=this.h3,e+=(o^t&(n^o))+r[0]-680876936,e=(e<<7|e>>>25)+t<<0,o+=(n^e&(t^n))+r[1]-389564586,o=(o<<12|o>>>20)+e<<0,n+=(t^o&(e^t))+r[2]+606105819,n=(n<<17|n>>>15)+o<<0,t+=(e^n&(o^e))+r[3]-1044525330,t=(t<<22|t>>>10)+n<<0),e+=(o^t&(n^o))+r[4]-176418897,e=(e<<7|e>>>25)+t<<0,o+=(n^e&(t^n))+r[5]+1200080426,o=(o<<12|o>>>20)+e<<0,n+=(t^o&(e^t))+r[6]-1473231341,n=(n<<17|n>>>15)+o<<0,t+=(e^n&(o^e))+r[7]-45705983,t=(t<<22|t>>>10)+n<<0,e+=(o^t&(n^o))+r[8]+1770035416,e=(e<<7|e>>>25)+t<<0,o+=(n^e&(t^n))+r[9]-1958414417,o=(o<<12|o>>>20)+e<<0,n+=(t^o&(e^t))+r[10]-42063,n=(n<<17|n>>>15)+o<<0,t+=(e^n&(o^e))+r[11]-1990404162,t=(t<<22|t>>>10)+n<<0,e+=(o^t&(n^o))+r[12]+1804603682,e=(e<<7|e>>>25)+t<<0,o+=(n^e&(t^n))+r[13]-40341101,o=(o<<12|o>>>20)+e<<0,n+=(t^o&(e^t))+r[14]-1502002290,n=(n<<17|n>>>15)+o<<0,t+=(e^n&(o^e))+r[15]+1236535329,t=(t<<22|t>>>10)+n<<0,e+=(n^o&(t^n))+r[1]-165796510,e=(e<<5|e>>>27)+t<<0,o+=(t^n&(e^t))+r[6]-1069501632,o=(o<<9|o>>>23)+e<<0,n+=(e^t&(o^e))+r[11]+643717713,n=(n<<14|n>>>18)+o<<0,t+=(o^e&(n^o))+r[0]-373897302,t=(t<<20|t>>>12)+n<<0,e+=(n^o&(t^n))+r[5]-701558691,e=(e<<5|e>>>27)+t<<0,o+=(t^n&(e^t))+r[10]+38016083,o=(o<<9|o>>>23)+e<<0,n+=(e^t&(o^e))+r[15]-660478335,n=(n<<14|n>>>18)+o<<0,t+=(o^e&(n^o))+r[4]-405537848,t=(t<<20|t>>>12)+n<<0,e+=(n^o&(t^n))+r[9]+568446438,e=(e<<5|e>>>27)+t<<0,o+=(t^n&(e^t))+r[14]-1019803690,o=(o<<9|o>>>23)+e<<0,n+=(e^t&(o^e))+r[3]-187363961,n=(n<<14|n>>>18)+o<<0,t+=(o^e&(n^o))+r[8]+1163531501,t=(t<<20|t>>>12)+n<<0,e+=(n^o&(t^n))+r[13]-1444681467,e=(e<<5|e>>>27)+t<<0,o+=(t^n&(e^t))+r[2]-51403784,o=(o<<9|o>>>23)+e<<0,n+=(e^t&(o^e))+r[7]+1735328473,n=(n<<14|n>>>18)+o<<0,t+=(o^e&(n^o))+r[12]-1926607734,t=(t<<20|t>>>12)+n<<0,s=t^n,e+=(s^o)+r[5]-378558,e=(e<<4|e>>>28)+t<<0,o+=(s^e)+r[8]-2022574463,o=(o<<11|o>>>21)+e<<0,i=o^e,n+=(i^t)+r[11]+1839030562,n=(n<<16|n>>>16)+o<<0,t+=(i^n)+r[14]-35309556,t=(t<<23|t>>>9)+n<<0,s=t^n,e+=(s^o)+r[1]-1530992060,e=(e<<4|e>>>28)+t<<0,o+=(s^e)+r[4]+1272893353,o=(o<<11|o>>>21)+e<<0,i=o^e,n+=(i^t)+r[7]-155497632,n=(n<<16|n>>>16)+o<<0,t+=(i^n)+r[10]-1094730640,t=(t<<23|t>>>9)+n<<0,s=t^n,e+=(s^o)+r[13]+681279174,e=(e<<4|e>>>28)+t<<0,o+=(s^e)+r[0]-358537222,o=(o<<11|o>>>21)+e<<0,i=o^e,n+=(i^t)+r[3]-722521979,n=(n<<16|n>>>16)+o<<0,t+=(i^n)+r[6]+76029189,t=(t<<23|t>>>9)+n<<0,s=t^n,e+=(s^o)+r[9]-640364487,e=(e<<4|e>>>28)+t<<0,o+=(s^e)+r[12]-421815835,o=(o<<11|o>>>21)+e<<0,i=o^e,n+=(i^t)+r[15]+530742520,n=(n<<16|n>>>16)+o<<0,t+=(i^n)+r[2]-995338651,t=(t<<23|t>>>9)+n<<0,e+=(n^(t|~o))+r[0]-198630844,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~n))+r[7]+1126891415,o=(o<<10|o>>>22)+e<<0,n+=(e^(o|~t))+r[14]-1416354905,n=(n<<15|n>>>17)+o<<0,t+=(o^(n|~e))+r[5]-57434055,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~o))+r[12]+1700485571,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~n))+r[3]-1894986606,o=(o<<10|o>>>22)+e<<0,n+=(e^(o|~t))+r[10]-1051523,n=(n<<15|n>>>17)+o<<0,t+=(o^(n|~e))+r[1]-2054922799,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~o))+r[8]+1873313359,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~n))+r[15]-30611744,o=(o<<10|o>>>22)+e<<0,n+=(e^(o|~t))+r[6]-1560198380,n=(n<<15|n>>>17)+o<<0,t+=(o^(n|~e))+r[13]+1309151649,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~o))+r[4]-145523070,e=(e<<6|e>>>26)+t<<0,o+=(t^(e|~n))+r[11]-1120210379,o=(o<<10|o>>>22)+e<<0,n+=(e^(o|~t))+r[2]+718787259,n=(n<<15|n>>>17)+o<<0,t+=(o^(n|~e))+r[9]-343485551,t=(t<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=o+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+o<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,a=this.h3;return HEX_CHARS[15&e>>4]+HEX_CHARS[15&e]+HEX_CHARS[15&e>>12]+HEX_CHARS[15&e>>8]+HEX_CHARS[15&e>>20]+HEX_CHARS[15&e>>16]+HEX_CHARS[15&e>>28]+HEX_CHARS[15&e>>24]+HEX_CHARS[15&t>>4]+HEX_CHARS[15&t]+HEX_CHARS[15&t>>12]+HEX_CHARS[15&t>>8]+HEX_CHARS[15&t>>20]+HEX_CHARS[15&t>>16]+HEX_CHARS[15&t>>28]+HEX_CHARS[15&t>>24]+HEX_CHARS[15&n>>4]+HEX_CHARS[15&n]+HEX_CHARS[15&n>>12]+HEX_CHARS[15&n>>8]+HEX_CHARS[15&n>>20]+HEX_CHARS[15&n>>16]+HEX_CHARS[15&n>>28]+HEX_CHARS[15&n>>24]+HEX_CHARS[15&a>>4]+HEX_CHARS[15&a]+HEX_CHARS[15&a>>12]+HEX_CHARS[15&a>>8]+HEX_CHARS[15&a>>20]+HEX_CHARS[15&a>>16]+HEX_CHARS[15&a>>28]+HEX_CHARS[15&a>>24]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,a=this.h3;return[255&e,255&e>>8,255&e>>16,255&e>>24,255&t,255&t>>8,255&t>>16,255&t>>24,255&n,255&n>>8,255&n>>16,255&n>>24,255&a,255&a>>8,255&a>>16,255&a>>24]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,a='',o=this.array(),s=0;15>s;)e=o[s++],t=o[s++],n=o[s++],a+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=o[s],a+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&e<<4]+'==',a};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),!(__WEBPACK_AMD_DEFINE_RESULT__!==void 0&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))))})()}).call(this,__webpack_require__(1),__webpack_require__(2))},function(){},function(e,t,n){'use strict';function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){let n=Object(k.sha256)(E()(e)+t);for(let a=0;1e3>a;++a)n=Object(k.sha256)(n);return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=Math.max,p=Math.min,u=Math.floor;n.r(t);n(5);class m{constructor(){a(this,'_connected',!1)}get isFood(){return!1}get points(){return[[-1,-1]]}connected(){return this._connected}disconnect(){this._connected=!1}initialized(){return!1}place(){return!1}}class y extends m{constructor(e=25){super(),o(this,'_lifeTime',25),o(this,'_eaten',!1),this._lifeTime=e}get isFood(){return!0}get lifeTime(){return this._lifeTime}get eaten(){return this._eaten}set lifeTime(e){this._lifeTime=e}set eaten(e){this._eaten=!!e}}class b extends y{constructor(e=20,t=-1,n=-1){super(e),s(this,'_x',0),s(this,'_y',0),this._x=t,this._y=n}get points(){return[[this._x,this._y]]}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}initialized(){return 0<=this._x&&0<=this._y}place(e){if(this._connected)return!1;if(this.initialized())return!e.items.some((e)=>e.points.some((e)=>e[0]===this._x&&e[1]===this._y));const t=e.freeCells();if(!t)return!1;let n=t[u(Math.random()*t.length)];return this.y=u(n/e.sizeX),this.x=n%e.sizeX,this._connected=!0,!0}}class f extends m{constructor(...e){super(...e),i(this,'_points',[]),i(this,'_start',[-1,-1]),i(this,'_end',[-1,-1])}get points(){return this._points}get start(){return this._start}get end(){return this._end}set start(e){this._start=[e[0],e[1]],this._updatePoints()}set end(e){this._end=[e[0],e[1]],this._updatePoints()}initialized(){return 1<this._points.length}place(e){return!(this._connected||!this.initialized()||e.items.some((e)=>e.points.some((e)=>this._points.some((t)=>e[0]===t[0]&&e[1]===t[1]))))&&(this._connected=!0,!0)}_updatePoints(){const e=this._start,t=this._end;if(-1===e[0]||-1===e[1]||-1===t[0]||-1===t[1])return void(this._points=[]);let n=[];for(let a=p(e[0],t[0]);a<=h(e[0],t[0]);++a)for(let o=p(e[1],t[1]);o<=h(e[1],t[1]);++o)n.push([a,o]);this._points=n}}class g extends m{constructor(...e){super(...e),r(this,'_points',[]),r(this,'_grow',!1),r(this,'_angle',0)}get points(){return this._points}get angle(){return this._angle}init(e,t){e instanceof Array&&t instanceof Array&&2===e.length&&2===t.length&&(this._points.push(e),this._points.push(t),this._angle=e[0]<t[0]?2:e[0]>t[0]?0:e[1]<t[1]?3:1)}grow(){this._grow=!0}move(e,t,n=0,a=0){let o=this._points[this._points.length-1],s=[o[0]+n,o[1]+a],r=1;if(!t(s,e.sizeX,e.sizeY))r=0;else for(let t=0;t<e.items.length&&1==r;++t){let n=e.items[t],a=n.points;for(let e=0;e<a.length;++e)if(a[e][0]===s[0]&&a[e][1]===s[1]){n===this&&e===a.length-2?r=3:n.isFood?(r=2,n.eaten=!0):r=0;break}}return r&&3!=r&&(this._grow?this._grow=!1:this._points.splice(0,1),this._points.push(s)),r}moveNext(e){switch(this._angle){case 0:return this.moveLeft(e);case 1:return this.moveUp(e);case 2:return this.moveRight(e);case 3:return this.moveDown(e);}return 1}moveLeft(e){let t=this.move(e,(e)=>0<=e[0],-1);return 3===t?this.moveNext(e):(this._angle=0,t)}moveRight(e){let t=this.move(e,(e,t)=>e[0]<t,1);return 3===t?this.moveNext(e):(this._angle=2,t)}moveUp(e){let t=this.move(e,(e)=>0<=e[1],0,-1);return 3===t?this.moveNext(e):(this._angle=1,t)}moveDown(e){let t=this.move(e,(e,t,n)=>e[1]<n,0,1);return 3===t?this.moveNext(e):(this._angle=3,t)}initialized(){return 1<this._points.length}place(e){if(!this.initialized())return!1;let t=!e.items.some((e)=>e.points.some((e)=>this._points.some((t)=>t[0]===e[0]&&t[1]===e[1])));return t&&(this._connected=!0),t}}class v{constructor(e,t){l(this,'_sizeX',0),l(this,'_sizeY',0),l(this,'_items',[]),l(this,'_count',0),l(this,'_maxCount',0),l(this,'_previousTable',null),this._sizeX=e,this._sizeY=t,this._maxCount=this._sizeX*this._sizeY}get items(){return this._items.slice()}table(){let e=[],n=Array(this._maxCount).fill(0);const t=this._sizeX,a=this._sizeY;if(this._previousTable){for(let e=0;e<this._items.length;++e){let a=this._items[e],o=a.points;for(let e=0;e<o.length;++e){let s=o[e],i=t*s[1]+s[0];n[i]=a.isFood?6>a.lifeTime&&0!=a.lifeTime%2?0:1:a instanceof g?2:3}}for(let o=0;o<t;++o)for(let s=0;s<a;++s){let a=t*s+o,i=n[a];this._previousTable[a]!==i&&e.push({x:o,y:s,value:i})}}else for(let a=0;a<this._items.length;++a){let o=this._items[a],s=o.points;for(let a=0;a<s.length;++a){let i,r=s[a];i=o.isFood?6>o.lifeTime&&0!=o.lifeTime%2?0:1:o instanceof g?2:3,i&&e.push({x:r[0],y:r[1],value:i}),n[t*r[1]+r[0]]=i}}return this._previousTable=n,e}get sizeX(){return this._sizeX}get sizeY(){return this._sizeY}get count(){return this._count}available(){return 0<this._maxCount-this._count}addItem(e){return!!(e instanceof m&&this.available()&&-1===this._items.findIndex((t)=>t===e)&&e.place(this))&&(this._items.push(e),this._count+=e.points.length,!0)}removeItem(e){let t=this._items.findIndex((t)=>t===e);-1===t||(this._count-=e.points.length,this._items.splice(t,1))}clear(){this._items=[],this._count=0}freeCells(){if(!this._previousTable)return null;const e=this._previousTable;let t=[];for(let n=0;n<e.length;++n)e[n]||t.push(n);return t}clearPreviousTable(){this._previousTable=null}}var k=n(0),w=n(4),E=n.n(w);class T{constructor(e,t){_(this,'_hostUrl',void 0),this._hostUrl=e+':'+t+'/'}async saveScore(e,t){const n=JSON.stringify({name:e,score:t,hash:d(e,t)});let a;try{const e=await fetch(this._hostUrl,{method:'POST',body:n,headers:{Accept:'application/json',"Content-Type":'application/json'}});a=await e.json()}catch(e){return console.log('Could not save score by the reason',e),null}return a}async updateScoreTable(){let e;try{const t=await fetch(this._hostUrl,{headers:{Accept:'application/json',"Content-Type":'application/json'}});e=t.json()}catch(e){return console.log('Could not load score table by the reason',e),null}return e}}class S{constructor(e,t,n=10,a=null,o=10,s=20,i=300,r=10,l=25,d=25,_=1,h=4,p=null){c(this,'_field',null),c(this,'_elements',null),c(this,'_adapter',null),c(this,'_sizeX',0),c(this,'_sizeY',0),c(this,'_snake',null),c(this,'_input',[]),c(this,'_iterationTimer',null),c(this,'_level',-1),c(this,'_speed',0),c(this,'_speedFactor',0),c(this,'_score',0),c(this,'_levelScore',0),c(this,'_showHelp',!1),c(this,'_baseSpeed',0),c(this,'_baseSpeedIterationsCount',0),c(this,'_speedIterationsCount',0),c(this,'_shouldGenerateFood',!1),c(this,'_foodLifeTime',0),c(this,'_foodFactor',0),c(this,'_pause',!1),c(this,'_inputQueueLimit',0),c(this,'_levels',null),c(this,'_cellRenderer',null),c(this,'_activePrerenderedCell',null),c(this,'_inactivePrerenderedCell',null),c(this,'_foodPrerenderedCell',null),c(this,'_snakePrerenderedCell',null),c(this,'_shouldRedrawDisplay',!1),c(this,'_animationTimer',null),c(this,'_showScoreTable',!1),c(this,'_nameMaxLength',0),c(this,'_name',''),c(this,'_nameFieldMode',!1),c(this,'_keyboard',[]),c(this,'_keyboardActive',null),c(this,'_keyboardActiveIndex',-1),c(this,'_availableKeys',[37,38,39,40,65,87,68,83]),this._field=new v(o,s),this._elements={display:document.getElementById('snake-display'),highScore:document.getElementById('high-score'),score:document.getElementById('score'),level:document.getElementById('level'),speed:document.getElementById('speed'),gameOver:document.getElementById('game-over'),help:document.getElementById('help'),pause:document.getElementById('pause'),scoreTable:document.getElementById('score-table'),colorsEnableButton:document.getElementById('snake-colors-enable'),vibrationEnableButton:document.getElementById('snake-vibration-enable'),helpButton:document.getElementById('snake-help'),pauseButton:document.getElementById('snake-pause'),resetButton:document.getElementById('snake-reset'),leftButton:document.getElementById('snake-left'),upButton:document.getElementById('snake-up'),rightButton:document.getElementById('snake-right'),downButton:document.getElementById('snake-down'),scoreTableButton:document.getElementById('snake-show-score-table'),scoreTablePageUpButton:document.getElementById('snake-score-table-page-up'),scoreTablePageDownButton:document.getElementById('snake-score-table-page-down'),nameField:document.getElementById('name-field')},this._elements.nameFieldInput=this._elements.nameField.querySelector('.name-field__input'),this._adapter=new T(e,t),this._sizeX=o,this._sizeY=s,this._speedFactor=r,this.highScore=+localStorage.getItem('snakeHighScore');let u=localStorage.getItem('snakeColorsEnable');this.colorsEnable=null!==u&&'true'===u;let m=localStorage.getItem('snakeVibrationEnable');this.vibrationEnable=!(null!==m)||'true'===m,this._baseSpeed=i,this._baseSpeedIterationsCount=l,this._speedIterationsCount=l,this._foodLifeTime=d,this._foodFactor=_,this._inputQueueLimit=h,this._levels=a,this._cellRenderer=p,this._nameMaxLength=n,this.name='',this.nextIteration=this.nextIteration.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this.redrawDisplay=this.redrawDisplay.bind(this),this.render=this.render.bind(this),this._tableScorePageUp=this._tableScorePageUp.bind(this),this._tableScorePageDown=this._tableScorePageDown.bind(this),this._bindButtons(),this._initKeyboard()}get highScore(){return this._highScore}get score(){return this._score}get level(){return this._level}get speed(){return this._speed}get gameOver(){return this._gameOver}get colorsEnable(){return this._colorsEnable}get vibrationEnable(){return this._vibrationEnable}get name(){return this._name}get nameFieldMode(){return this._nameFieldMode}set highScore(e){this._highScore=e,this._elements.highScore.innerHTML=e}set score(e){this._score=e,this.highScore<e&&(this.highScore=e),this._elements.score.innerHTML=e}set level(e){this._level=e,this._elements.level.innerHTML=e}set speed(e){this._speed=e,this._elements.speed.innerHTML=e}set gameOver(e){this._gameOver=!!e,this._gameOver?(this._elements.gameOver.innerHTML='GAME<br>OVER',this.nameFieldMode=!0):(this._elements.gameOver.innerHTML='',this.nameFieldMode=!1)}set colorsEnable(e){this._colorsEnable=!!e,this._elements.colorsEnableButton.className='push-button push-button_small'+(e?' push-button_active':''),localStorage.setItem('snakeColorsEnable',this._colorsEnable),this.redrawDisplay()}set vibrationEnable(e){this._vibrationEnable=!!e,this._elements.vibrationEnableButton.className='push-button push-button_small'+(e?' push-button_active':''),localStorage.setItem('snakeVibrationEnable',this._vibrationEnable)}set name(e){e.length>this._nameMaxLength||(this._name=e,this._elements.nameFieldInput.innerHTML=this._name.padEnd(this._nameMaxLength,'_'))}set cellRenderer(e){'function'==typeof e&&(this._cellRenderer=e)}set nameFieldMode(e){return e&&0<this.score?(this._nameFieldMode=!0,this.name='',this._setActiveButton(0),void this._elements.nameField.classList.remove('name-field_hidden')):void(this._nameFieldMode=!1,this._elements.nameField.classList.add('name-field_hidden'))}destroy(){this.stop(),this.clearFieldLayout()}render(){const e=this._field.table(),t=this._elements.display,n=t.width/this._sizeX,a=t.height/this._sizeY,o=t.getContext('2d');for(let t=0;t<e.length;++t){o.clearRect(e[t].x*n,e[t].y*a,n,a);let s;switch(e[t].value){case 0:s=this._inactivePrerenderedCell;break;case 1:s=this._foodPrerenderedCell;break;case 2:s=this._snakePrerenderedCell;break;case 3:s=this._activePrerenderedCell;}o.drawImage(s,e[t].x*n,e[t].y*a)}this._animationTimer=requestAnimationFrame(this.render)}run(e=!1,t=!1){var n=Math.ceil;this.reset(t),this.gameOver=!1,this._speedIterationsCount=this._baseSpeedIterationsCount,this._snake=new g,this._levelScore=0;let a,o;(t||e)&&([a,o]=this._levelUp()),a&&o||(a=[n(this._field.sizeX/2),n(this._field.sizeY/2)],o=[a[0],a[1]-1]),this._snake.init(a,o),this._field.addItem(this._snake),this.render();let s=new b(this._foodLifeTime);this._field.addItem(s),e||this._bindEvents(),this._iterationTimer=setTimeout(this.nextIteration,this._timeout())}stop(){this._iterationTimer&&(clearTimeout(this._iterationTimer),this._iterationTimer=null),window.removeEventListener('keyup',this._onKeyUp),window.removeEventListener('resize',this.redrawDisplay),this.reset()}reset(e=!1){this._animationTimer&&(cancelAnimationFrame(this._animationTimer),this._animationTimer=null),this._field.clear(),this._shouldGenerateFood=!1,this._speedIterationsCount=this._baseSpeedIterationsCount,e||(this.score=0,this.speed=0,this.level=-1),this._input=[],this._iterationTimer=null,this._pause=!1}nextIteration(){this._shouldRedrawDisplay&&this._redrawDisplay(),--this._speedIterationsCount,this._speedIterationsCount||(++this.speed,this._speedIterationsCount=this._baseSpeedIterationsCount);let e=!0,t=!0,n=this._field.items.filter((e)=>e.isFood);n.forEach((e)=>{0<e.lifeTime&&--e.lifeTime});let a=this._input.shift();if(87===a||38===a?e=this._snake.moveUp(this._field):83===a||40===a?e=this._snake.moveDown(this._field):65===a||37===a?e=this._snake.moveLeft(this._field):68===a||39===a?e=this._snake.moveRight(this._field):t=!1,t||(e=this._snake.moveNext(this._field)),!e){this.gameOver=!0;let e=+localStorage.getItem('snakeHighScore');return this.highScore=h(e,this.highScore),void localStorage.setItem('snakeHighScore',this.highScore)}if(2===e){let e=n.filter((e)=>e.eaten);if(e.forEach((e)=>{this._incrementLevelScore(h(1,e.lifeTime*this._foodFactor)),this._field.removeItem(e)}),this._levelScore>=this._levels[this.level%this._levels.length].score)return void this.run(!1,!0);this._snake.grow(),this._shouldGenerateFood=!0}if(this._shouldGenerateFood){this._shouldGenerateFood=!1;let e=new b(this._foodLifeTime);this._field.addItem(e)}this._iterationTimer=setTimeout(this.nextIteration,this._timeout())}addInput(e){const t=this._input,n=t.length;this._availableKeys.includes(e)&&n<this._inputQueueLimit&&(!n||t[n-1]!==e)&&t.push(e)}createFieldLayout(){if(!this._cellRenderer)return!1;const e=this._sizeX,t=this._sizeY,n=this._elements.display;n.width=n.clientWidth,n.height=n.clientHeight;const a=n.getContext('2d'),o=n.width/e,s=n.height/t,i=this.colorsEnable;this._activePrerenderedCell=this._cellRenderer(o,s,!0),this._inactivePrerenderedCell=this._cellRenderer(o,s),this._foodPrerenderedCell=this._cellRenderer(o,s,!0,i?'food':'default'),this._snakePrerenderedCell=this._cellRenderer(o,s,!0,i?'snake':'default');for(let n=0;n<e;++n)for(let e=0;e<t;++e)a.drawImage(this._inactivePrerenderedCell,n*o,e*s);return!0}clearFieldLayout(){const e=this._elements.display;e.width=e.clientWidth,e.height=e.clientHeight}redrawDisplay(){this.gameOver?this._redrawDisplay():this._shouldRedrawDisplay=!0}_incrementLevelScore(e){this._levelScore+=e,this.score+=e}_levelUp(){++this.level;const e=this._levels[this.level%this._levels.length];this.speed=e.speed+u(this.level/this._levels.length);for(let t=0;t<e.items.length;++t){const n=e.items[t];if('wall'===n.type){let e=new f;e.start=n.start,e.end=n.end,this._field.addItem(e)}}return[e.snakeStart,e.snakeEnd]}_bindEvents(){window.addEventListener('keyup',this._onKeyUp),window.addEventListener('resize',this.redrawDisplay)}_onKeyUp(e){if(this.nameFieldMode){if(27===e.keyCode)this.nameFieldMode=!1;else if(13===e.keyCode)this.name.length&&this._sendScore();else if(32===e.keyCode)this._applyKeyboardSymbol();else if(38===e.keyCode)this._moveKeyboardCursor(0);else if(40===e.keyCode)this._moveKeyboardCursor(1);else if(37===e.keyCode)this._moveKeyboardCursor(2);else if(39===e.keyCode)this._moveKeyboardCursor(3);else if(8===e.keyCode)this._keyboard[this._keyboard.length-2].click();else if(65<=e.keyCode&&91>e.keyCode){const t=this._keyboard.find((t)=>t.innerHTML.charCodeAt(0)===e.keyCode);t&&t.click()}else if(['_','.','-','\'','"'].includes(e.key)){const t=this._keyboard.find((t)=>t.innerHTML.charAt(0)===e.key);t&&t.click()}}else if(82===e.keyCode||13===e.keyCode){if(this._showHelp||this._pause||this._showScoreTable)return;if(this._iterationTimer)return clearTimeout(this._iterationTimer),this._iterationTimer=null,void this.run(!0)}else{if(80===e.keyCode||32===e.keyCode)return void(this._showHelp||this._showScoreTable||this._togglePause());if(72===e.keyCode||27===e.keyCode){if(this._showScoreTable)return;this._showHelp=!this._showHelp,this._elements.help.className='help'+(this._showHelp?'':' help_hidden'),this._elements.helpButton.className='push-button push-button_small'+(this._showHelp?' push-button_active':''),this._pause||this._togglePause(!0)}else if(67===e.keyCode)this.colorsEnable=!this.colorsEnable;else if(86===e.keyCode)this.vibrationEnable=!this.vibrationEnable;else if(84===e.keyCode){if(this._showHelp)return;this._showScoreTable=!this._showScoreTable,this._toggleScoreTable()}else 33===e.keyCode?this._showScoreTable&&this._tableScorePageUp():34===e.keyCode&&this._showScoreTable&&this._tableScorePageDown()}this.addInput(e.keyCode)}_togglePause(e=!1){this.gameOver||(this._iterationTimer?(clearTimeout(this._iterationTimer),this._iterationTimer=null,this._elements.pause.innerHTML='PAUSE',this._elements.pauseButton.className='push-button push-button_big push-button_active',!e&&(this._pause=!0)):(this._iterationTimer=setTimeout(this.nextIteration,this._timeout()),this._elements.pause.innerHTML='',this._elements.pauseButton.className='push-button push-button_big',!e&&(this._pause=!1)))}_timeout(){return this._baseSpeed-this._speed*this._speedFactor}_bindButtons(){const e=(e)=>()=>{e(),this.vibrationEnable&&navigator.vibrate(35)};this._elements.pauseButton.addEventListener('click',e(()=>this._onKeyUp({keyCode:32}))),this._elements.resetButton.addEventListener('click',e(()=>this._onKeyUp({keyCode:13}))),this._elements.leftButton.addEventListener('click',e(()=>this.addInput(37))),this._elements.upButton.addEventListener('click',e(()=>this.addInput(38))),this._elements.rightButton.addEventListener('click',e(()=>this.addInput(39))),this._elements.downButton.addEventListener('click',e(()=>this.addInput(40))),this._elements.helpButton.addEventListener('click',e(()=>this._onKeyUp({keyCode:27}))),this._elements.scoreTableButton.addEventListener('click',e(()=>this._onKeyUp({keyCode:84}))),this._elements.colorsEnableButton.addEventListener('click',e(()=>this.colorsEnable=!this.colorsEnable)),this._elements.vibrationEnableButton.addEventListener('click',e(()=>this.vibrationEnable=!this.vibrationEnable))}_redrawDisplay(){this._shouldRedrawDisplay=!1,this._field.clearPreviousTable(),this.createFieldLayout(),this.render()}async _toggleScoreTable(e=null){if(this._pause||this._togglePause(!0),this._showScoreTable){let t;if(e)t=e;else try{t=await this._adapter.updateScoreTable()}catch(e){t=null}const n=this._elements.scoreTable.getElementsByClassName('score-table__table')[0];if(n.style.top='0',t){let e='<tr><th class="score-table__table-header_left">#</th><th class="score-table__table-header_left">NAME</th><th class="score-table__table-header_right">SCORE</th></tr>';for(let n=0;n<t.length;++n){const a=t[n];e+=`<tr class="score-table__item ${a.you?'score-table__item_active':''}">`+`<td class="score-table__item-text">${+(n+1)}</td>`+`<td class="score-table__item-text">${a.name}</td>`+`<td class="score-table__item-score">${a.score}</td>`+'</tr>'}n.innerHTML=e}else n.innerHTML='<tr><th>UNAVAILABLE</th></tr>';this._elements.scoreTable.className='score-table',this._elements.scoreTableButton.className='push-button push-button_small push-button_active',this._elements.scoreTablePageUpButton.addEventListener('click',this._tableScorePageUp),this._elements.scoreTablePageDownButton.addEventListener('click',this._tableScorePageDown)}else this._elements.scoreTable.className='score-table score-table_hidden',this._elements.scoreTableButton.className='push-button push-button_small',this._elements.scoreTablePageUpButton.removeEventListener('click',this._tableScorePageUp),this._elements.scoreTablePageDownButton.removeEventListener('click',this._tableScorePageDown)}_tableScorePageUp(){const e=this._elements.scoreTable.getElementsByClassName('score-table__table')[0];if(!(e.parentElement.clientHeight>e.clientHeight)){const t=(e.style.top?parseInt(e.style.top):0)+4;e.style.top=p(t,0)+'vh'}}_tableScorePageDown(){const e=this._elements.scoreTable.getElementsByClassName('score-table__table')[0];if(!(e.parentElement.clientHeight>e.clientHeight)){const t=(e.style.top?parseInt(e.style.top):0)-4,n=document.documentElement.clientHeight/100;t*n+e.clientHeight>e.parentElement.clientHeight-6*n&&(e.style.top=t+'vh')}}_initKeyboard(){var e=String.fromCharCode;const t=this._elements.nameField,n=t.querySelector('.name-field__keyboard'),a=(t,a=!0)=>{const o=document.createElement('div');o.innerHTML=a?e(t):t,o.classList.add('name-field__symbol'),n.appendChild(o);const s=this._keyboard.length;return this._keyboard.push(o),[o,s]};for(let t=65;91>t;++t){const[n,o]=a(t);n.addEventListener('click',()=>{this.name+=e(t),this._setActiveButton(o)})}['_','.','-','\'','"'].forEach((e)=>{const[t,n]=a(e,!1);t.addEventListener('click',()=>{this.name+=e,this._setActiveButton(n)})});const[o,s]=a(8592);o.addEventListener('click',()=>{this.name=this._name.slice(0,this._name.length-1),this._setActiveButton(s)});const i=t.querySelector('.name-field__symbol_done');i.addEventListener('click',this._sendScore.bind(this)),this._keyboard.push(i)}async _sendScore(){this._setActiveButton(this._keyboard.length-1);const e=await this._adapter.saveScore(this.name,this.score);e&&(this._showScoreTable=!0,this._toggleScoreTable(e)),this.nameFieldMode=!1}_moveKeyboardCursor(e){const t=this._keyboardActiveIndex,n=this._keyboard.length;if(-1===t)return void this._setActiveButton(0);0===e?this._setActiveButton(h(8*(u(t/8)-1)+t%8,0)):1===e?this._setActiveButton(p(8*(u(t/8)+1)+t%8,n-1)):2===e?this._setActiveButton(h(t-1,0)):3===e?this._setActiveButton(h(t+1,0)):void 0}_applyKeyboardSymbol(){this._keyboardActive&&this._keyboardActive.click()}_setActiveButton(e){const t=this._keyboard;for(let n=0;n<t.length;++n)t[n].classList.remove('name-field__symbol_active');t[e].classList.add('name-field__symbol_active'),this._keyboardActive=t[e],this._keyboardActiveIndex=e}}var B=function(e,t,n=!1,a='default'){const o=document.createElement('canvas');o.width=e,o.height=t;const s=o.getContext('2d'),i=.03555,r=.075,l=e*i,d=t*i,_=p(e*r,t*r),c=.2,h=e*c,u=t*c,m=(()=>n?'food'===a?'rgba(135, 64, 80, 0.9)':'snake'===a?'#0c3a4f':'rgba(0, 0, 0, 0.9)':'rgba(0, 0, 0, 0.2)')();return s.strokeStyle=m,s.fillStyle=m,s.lineWidth=_,s.strokeRect(l+_/2,d+_/2,e-2*l-_,t-2*d-_),s.fillRect(h,u,e-2*h,t-2*u),o};var C=[{speed:0,score:100,items:[]},{speed:0,score:150,items:[{type:'wall',start:[1,1],end:[2,2]},{type:'wall',start:[7,1],end:[8,2]}]},{speed:0,score:200,items:[{type:'wall',start:[1,1],end:[2,2]},{type:'wall',start:[7,1],end:[8,2]},{type:'wall',start:[1,17],end:[2,18]},{type:'wall',start:[7,17],end:[8,18]}]},{speed:0,score:250,items:[{type:'wall',start:[1,1],end:[1,4]},{type:'wall',start:[2,1],end:[4,1]},{type:'wall',start:[3,3],end:[4,4]},{type:'wall',start:[4,18],end:[7,18]},{type:'wall',start:[8,15],end:[8,18]},{type:'wall',start:[5,15],end:[6,16]}]},{speed:0,score:300,items:[{type:'wall',start:[1,1],end:[1,10]},{type:'wall',start:[2,1],end:[4,1]},{type:'wall',start:[3,3],end:[4,6]},{type:'wall',start:[2,18],end:[7,17]},{type:'wall',start:[8,12],end:[8,18]},{type:'wall',start:[9,0],end:[9,2]}]},{speed:0,score:350,items:[{type:'wall',start:[0,3],end:[1,3]},{type:'wall',start:[0,14],end:[5,14]},{type:'wall',start:[2,6],end:[2,11]},{type:'wall',start:[3,6],end:[4,6]},{type:'wall',start:[3,11],end:[6,11]},{type:'wall',start:[4,3],end:[6,3]},{type:'wall',start:[7,3],end:[7,11]},{type:'wall',start:[4,17],end:[7,19]},{type:'wall',start:[8,14],end:[9,14]}]}];var I={host:'https://evokorm.ru',port:7030,nameMaxLength:10};document.addEventListener('DOMContentLoaded',function(){const e=new S(I.host,I.port,I.nameMaxLength,C);e.cellRenderer=B,e.createFieldLayout()?e.run(!1,!0):console.log('Could not create a field layout.')})}]);